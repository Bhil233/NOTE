源码地址
	E:\stm32\VFD屏幕驱动
文档地址
	E:\stm32\VFD屏幕驱动\pdf

![](attachments/Pasted%20image%2020241225103736.png)
![](attachments/Pasted%20image%2020241225103817.png)



| 串口波特率 |      9600       |
| :---: | :-------------: |
|  停止位  |        1        |
|  无校验  |                 |
| 数据长度  |       12        |
| 数据结构  | 帧头+显示数据+显示亮度+帧尾 |
## 内置字库

|  帧头  | FE 49  |  hex  |
| :--: | :----: | :---: |
| 显示数据 |   字符   | ASCII |
| 显示亮度 | 01-255 |  hex  |
|  帧尾  |   1    |  hex  |

## 自定义字模


|  帧头  | FE 50  | hex |
| :--: | :----: | :-: |
| 显示位置 |  0-7   | hex |
| 显示字模 |  字模数据  | hex |
| 显示亮度 | 01-255 | hex |
|  帧尾  |   1    | hex |

~~是~~
```
/**
  * @brief  TIM3中断服务函数。
  * @param  None
  * @retval None
  */
void TIM3_IRQHandler(void)
{	
	if(TIM_GetITStatus(TIM3, TIM_IT_Update)) {
		if((Tim3_cnt++ >= 100) && KEY1_STATE()) {
			TIM_ITConfig(TIM3, TIM_IT_Update, DISABLE);	// 关闭定时器计数
			if (Key_long_flag_2)
				Key_long_flag_2 = 0;
			else 
				Key_long_flag_2 = 1;
		}
		TIM_ClearITPendingBit(TIM3, TIM_IT_Update);
	}
}
/**
  * @brief  KEY1中断服务函数。
  * @param  None
  * @retval None
  */
void KEY1_EXTIn_IRQHandler(void)
{	
	if(EXTI_GetITStatus(EXTI_Line1) != RESET) {
		if(KEY1_STATE()) {
			Tim3_cnt = 0;				// 清空tim3计算器
			TIM_ITConfig(TIM3, TIM_IT_Update, ENABLE);	// 开启定时器计数
		}
		else if((Tim3_cnt++ < 100 && Tim3_cnt > 4) && !KEY1_STATE())
		{
			Tim3_cnt = 0;				// 清空tim3计算器
			if (Key_short_flag_2)
				Key_short_flag_2 = 0;
			else 
				Key_short_flag_2 = 1;
			TIM_ITConfig(TIM3, TIM_IT_Update, DISABLE);	// 关闭定时器计数
		}
		EXTI_ClearITPendingBit(EXTI_Line1);	// 清除中断标志
	}
}
/**
  * @brief  TIM2中断服务函数。
  * @param  None
  * @retval None
  */
void TIM2_IRQHandler(void)
{	
	if(TIM_GetITStatus(TIM2, TIM_IT_Update)) {
		if((Tim2_cnt++ >= 100) && KEY0_STATE()) {
			TIM_ITConfig(TIM2, TIM_IT_Update, DISABLE);	// 关闭定时器计数
			if (Key_long_flag_1)
				Key_long_flag_1 = 0;
			else 
				Key_long_flag_1 = 1;
		}
		TIM_ClearITPendingBit(TIM2, TIM_IT_Update);
	}
}
/**
  * @brief  KEY0中断服务函数。
  * @param  None
  * @retval None
  */
void KEY0_EXTIn_IRQHandler(void)
{	
	if(EXTI_GetITStatus(EXTI_Line0) != RESET) {
		if(KEY0_STATE()) {
			Tim2_cnt = 0;				// 清空tim2计算器
			TIM_ITConfig(TIM2, TIM_IT_Update, ENABLE);	// 开启定时器计数
		}
		else if((Tim2_cnt++ < 100 && Tim2_cnt > 4) && !KEY0_STATE())
		{
			Tim2_cnt = 0;				// 清空tim2计算器
			if (Key_short_flag_1)
				Key_short_flag_1 = 0;
			else 
				Key_short_flag_1 = 1;
			TIM_ITConfig(TIM2, TIM_IT_Update, DISABLE);	// 关闭定时器计数
		}
		EXTI_ClearITPendingBit(EXTI_Line0);	// 清除中断标志
	}
}
```